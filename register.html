<!DOCTYPE html>
<html lang="de">
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<head>
    <title>BB Discord Edition</title>
    <meta property="og:title" content="Better Bolle">
    <meta property="og:description" content="Keine Idee was hier hin soll :/">
    <meta property="og:url" content="betterbolle.de">
    <meta property="og:image" content="./icon.png">
    <meta property="og:image:alt" content="BB-Logo" />

    <meta name="keywords" content="Bolle, BetterBolle, BB">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Keine Idee was hier hin soll :/">
    <meta name="theme-color" content="#3a71c1">
    <meta name="msapplication-TileColor" content="#3a71c1">
    <meta name="msapplication-TileImage" content="./icon.png">

    <link rel="icon" type="image/png" sizes="192x192" href="./icon.png">
    <link rel="manifest" href="https://betterdiscord.app/resources/favicon/manifest.json">
    <link rel="stylesheet"
        href="https://betterdiscord.app/css/normalize.css?v=FCbDC8zhJbOy_O5J4VcMX8fyFPqElXhlZ4RnreLLVhY" />
    <link rel="stylesheet"
        href="https://betterdiscord.app/css/site.css?v=ruWOL6sgDAETftGoT-jJGFtcMEXEsJuT3uCkbe3bKok" />



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <header id="navbar" class="page-section flex-container align-center">
        <div class="page-section-inner">
            <a class="navbar-logo-container" href="https://betterbolle.de/">
                <img loading="lazy" class="navbar-logo hide-mobile" src="./betterBolleLogo_white.png" alt="BB-Logo" />
                <img loading="lazy" class="navbar-logo small" src="./icon.png" alt="BB-Logo" />
            </a>
            <nav id="navbar-nav-items" class="flex-container align-center" data-toggle="affix">
                <a class="nav-item" href="https://github.com/EliasCuin">Über uns</a>

                <form action="https://discord.gg/d8H9RfY5UT" method="post">
                    <input type="hidden" name="ReturnUrl" value="https://betterbolle.de/" />
                    <button href="#" type="submit" class="btn btn-secondary">
                        <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="16"
                            height="16">
                            <path fill-rule="evenodd"
                                d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273l-1.47-1.338l-1.604-1.398l.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537c-1.336-.668-2.54-1.002-3.744-1.137c-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735c-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02c0 0 1 1.74 3.743 1.806c0 0 .4-.533.805-1.002c-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03c.33.136.66.27.93.4a8.18 8.18 0 0 0 1.8.536c.93.135 1.996.2 3.21 0c.6-.135 1.2-.267 1.8-.535c.39-.2.87-.4 1.397-.737c0 0-.6.936-2.205 1.404c.33.466.795 1 .795 1c2.744-.06 3.81-1.8 3.87-1.726c0-3.87-1.815-7.02-1.815-7.02c-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335c0 .74-.57 1.34-1.27 1.34c-.7 0-1.27-.6-1.27-1.334c.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335c0 .74-.57 1.34-1.27 1.34c-.7 0-1.27-.6-1.27-1.334c0-.74.57-1.338 1.27-1.338z" />
                        </svg>
                        <span>Unser Discord Server</span>
                    </button>
                </form>
            </nav>
        </div>
    </header>

    <main id="main-page-content">
        <section id="home-hero-section" class="page-section">

            <div class="page-section-inner" id="registerPage" style="display:contents">

                <div id="" class="flex-container align-center justify-center direction-column">

                    <h1 style="color: white; ">Bei BetterBolle registrieren</h1>
                    <p style="color: rgb(123, 121, 121); ">Schon ein Account? Jetzt <a href="./login.html">hier</a>
                        anmelden</p>
                    <div style="background-color: white; height: 2px; width: 100px; margin-top:20px;"></div>
                    <form style="color: white; margin-top: 30px;">
                        <div class="form-group">
                            <label for="exampleInputEmail1" style="margin-right:42px;">Deine Schul-Email </label>
                            <input type="email" class="form-control" id="SchulEmail" aria-describedby="emailHelp"
                                placeholder="E-Mail">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1" style="margin-right: 104px; width: 50px;">Passwort:</label>
                            <input type="password" class="form-control" id="Passwort1" aria-describedby="emailHelp"
                                placeholder="Passwort">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1" style="margin-right: 104px;">Passwort:</label>
                            <input type="password" class="form-control" id="Passwort2" aria-describedby="emailHelp"
                                placeholder="Passwort wiederholen ">
                        </div>

                        <div class="form-check">
                             <p style="color: red"> NOTIERE : Funktioniert gerade nicht für User!!!<br> --> Noch in Entwicklungsphase </p>
                        </div>
                    </form>
                    <div style="background-color: white; height: 2px; width: 100px; margin-top:20px;"></div>

                    <div class="btn-container" style="margin-top: 20px;">
                        <button onclick="register();" class="btn btn-primary"
                            id="hero-download-buttons"><span>Registrieren</span></button>
                    </div>
                </div>


            </div>

            <div class="page-section-inner" id="loadingPage" style="display:none">

                <div id="" class="flex-container align-center justify-center direction-column">

                    <b style="color: white;">Du wirst registriert</b>
                    <p style="color: rgb(60, 57, 57);">Dies kann ein Moment dauern</p>
                    <div class="lds-ring" style="margin-top: 20px;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>

                </div>
            </div>

            <div class="page-section-inner" id="error" style="display:none">

                <div id="" class="flex-container align-center justify-center direction-column">

                    <b style="color: rgb(255, 93, 93); margin-bottom: 10px;">Ein Fehler ist aufgetreten:</b>
                    <div style="height: 2px; width: 100px; background-color: rgb(255, 255, 255);"></div>
                    <p style="color: rgb(255, 255, 255); margin-top: 10px;">Mögliche Uhrsachen:</p>
                    <br>
                    <ul style="color: rgb(252, 252, 252);">
                        <li>Keine Internetverbindung</li>
                        <li>Die eingegebenen Passwörter stimmen nicht überein</li>
                        <li>Felder nicht ausgefüllt</li>
                        <li>Keine Schul-Email eingegeben.(Beispiel : mustermann@sophie-scholl-student.eu)</li>
                        <li>Account gibt es schon</li>
                        <li>Wartungsarbeiten</li>

                    </ul>
                    <button onclick="retry();" class="btn btn-primary" id="hero-download-buttons"
                        style="margin-top: 15px;"><span>Erneuert versuchen</span></button>
                </div>
            </div>

            <div class="page-section-inner" id="emailSended" style="display:none">

                <div id="" class="flex-container align-center justify-center direction-column">

                    <b style="color: white; margin-bottom: 10px;">Bitte bestätige deine Email</b>
                    <div style="height: 2px; width: 100px; background-color: rgb(136, 132, 132);"></div>
                    <p id="bestätigungText" style="color: rgb(242, 242, 242); margin-top: 10px;">Wir haben gerade einen
                        pin an
                        <b>{E-Mail}</b> gesendet. <br> Bitte gebe diese hier ein um deine Identität zu bestätigen
                    </p>
                    <div
                        style="height: 2px; width: 100px; background-color: rgb(89, 87, 87); margin-top: 10px; margin-bottom: 10px;">
                    </div>
                    <input type="passwords" class="form-control" id="pin" placeholder="Code">
                    <b style="color: rgb(255, 93, 93); margin-bottom: 10px; display:none " id="wrong">falsch</b>
                    <div>
                        <button onclick="verify();" class="btn btn-primary" id="hero-download-buttons"
                            style="margin-top: 15px;"><span>Verifizieren</span></button>
                    </div>
                </div>
    </main>

    <div class="footer-container">
        <img class="zere hide-mobile" loading="lazy" src="https://betterdiscord.app/resources/ui/techsupport.webp   "
            alt="Easter egg" />
        <footer id="section-footer" class="page-section">
            <div class="page-section-inner">
                <section id="footer-top" class="flex-container hide-mobile">
                    <div class="footer-column">
                        <a class="footer-logo-wrap" href="./index.html">
                            <img class="footer-logo" loading="lazy" src="./betterBolleLogo_white.png" alt="BB-Logo" />
                        </a>
                        <input onkeyup="checkForEasterEgg()" id="easter-egg-input" class="footer-column-item"
                            value="BetterBolle" />
                    </div>
                    <div class="footer-column">

                </section>
                <section id="footer-bottom" class="flex-container wrap align-center justify-between">
                    <div class="hide-desktop flex-container wrap" id="footer-privacy-container">
                        <div class="footer-privacy text-center">
                            <a href="./" class="footer-privacy-item">Advertise With Us</a>
                            <a href="./" class="footer-privacy-item">Privacy Policy</a>
                            <a href="./" class="footer-privacy-item">Contact Us</a>
                            <a href="#" class="footer-privacy-item" onclick="displayPreferenceModal()">Cookie
                                Preferences</a>
                        </div>
                    </div>
                    <div class="flex-container wrap" id="footer-copyright-container">
                        <div class="footer-copyright text-center">
                            © 2021
                            <a class="anchor" rel="noreferrer noopener" target="_blank"
                                href="https://github.com/EliasCuin">BetterBolle Team</a>
                        </div>
                    </div>
                    <div id="footer-social-icons" class="flex-container justify-center wrap">
                        <a rel="noreferrer noopener" target="_blank" href="https://discord.gg/d8H9RfY5UT"
                            class="social-icon discord">
                            <svg class="social-icon-inner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23"
                                width="26" height="26">
                                <path fill="currentColor" fill-rule="evenodd"
                                    d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273l-1.47-1.338l-1.604-1.398l.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537c-1.336-.668-2.54-1.002-3.744-1.137c-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735c-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02c0 0 1 1.74 3.743 1.806c0 0 .4-.533.805-1.002c-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03c.33.136.66.27.93.4a8.18 8.18 0 0 0 1.8.536c.93.135 1.996.2 3.21 0c.6-.135 1.2-.267 1.8-.535c.39-.2.87-.4 1.397-.737c0 0-.6.936-2.205 1.404c.33.466.795 1 .795 1c2.744-.06 3.81-1.8 3.87-1.726c0-3.87-1.815-7.02-1.815-7.02c-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335c0 .74-.57 1.34-1.27 1.34c-.7 0-1.27-.6-1.27-1.334c.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335c0 .74-.57 1.34-1.27 1.34c-.7 0-1.27-.6-1.27-1.334c0-.74.57-1.338 1.27-1.338z" />
                            </svg>
                        </a>
                        <a rel="noreferrer noopener" target="_blank" href="https://github.com/EliasCuin"
                            class="social-icon github">
                            <svg class="social-icon-inner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"
                                width="26" height="26">
                                <path fill="currentColor" fill-rule="evenodd"
                                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                                </path>
                            </svg>
                        </a>
                    </div>
                </section>
            </div>
        </footer>
    </div>
    <link rel="stylesheet"
        href="https://betterdiscord.app/css/overlayScrollbars.min.css?v=O2pCLRUtp_LLSWw6pJnoFU0x-p02SVp57AvtCn9PWwo" />
    <link rel="stylesheet"
        href="https://betterdiscord.app/css/tagify.min.css?v=I2F_fck85njBcZJPjXiQz8WQO5mCA0ZDyyVJz9WQxwk" />
    <script
        src="https://betterdiscord.app/js/vendor/popper.min.js?v=GLgOQLuTrl-PHTJTsD2OXVW1E0GifteM9C_q3QErz58"></script>
    <script
        src="https://betterdiscord.app/js/vendor/tippy-bundle.umd.min.js?v=wj2Cg4b26_DzTSJbD0xJnCDkhMxXlR4cTJyGVgo5XdY"></script>
    </body>

    <style>
        .lds-ring {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 80px;
        }

        .lds-ring div {
            box-sizing: border-box;
            display: block;
            position: absolute;
            width: 64px;
            height: 64px;
            margin: 8px;
            border: 8px solid #fff;
            border-radius: 50%;
            animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
            border-color: #fff transparent transparent transparent;
        }

        .lds-ring div:nth-child(1) {
            animation-delay: -0.45s;
        }

        .lds-ring div:nth-child(2) {
            animation-delay: -0.3s;
        }

        .lds-ring div:nth-child(3) {
            animation-delay: -0.15s;
        }

        @keyframes lds-ring {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>

    <script>
        let gEmail;

        function displaySucces() {
            document.getElementById("loadingPage").style = "display:none"
            document.getElementById("emailSended").style = "display:contents"
        }

        function displayError() {
            document.getElementById("error").style = "display:contents"
            document.getElementById("loadingPage").style = "display:none"
        }

        async function register() {

            document.getElementById("registerPage").style = "display: none;"
            document.getElementById("loadingPage").style = "display:contents"


            let email = document.getElementById("SchulEmail").value.toString()
            gEmail = email
            let passwort1 = document.getElementById("Passwort1").value
            let passwort2 = document.getElementById("Passwort2").value
            document.getElementById("bestätigungText").innerHTML = "Wir haben gerade einen Bestätigungscode an <b>" + email + "</b> gesendet.<br>Bitte gebe jetzt diesen hier ein um deine E-Mail zu bestätigen "
            if (passwort1 == passwort2) {
                console.log(email + ":" + passwort1)
                let response = await getRequest("http://localhost:3000/register?email=" + email + "&password=" + passwort1)
                console.log("recieved --> " + response)
                await Sleep(1000)
                if (response.substring(0, 1) != "E") displaySucces()
                else displayError()

            }
            else {
                await Sleep(1000)
                displayError();
            }


        }

        async function clear() {
            await Sleep(500)
            console.clear();
        }

        function retry() {
            document.getElementById("registerPage").style = "display: contents;"
            document.getElementById("loadingPage").style = "display:none"
            document.getElementById("error").style = "display:none"
        }

        //Example /verify?email=elias@betterbolle.de&code=1234
        async function verify() {
            let pin = document.getElementById("pin").value
            let wrongElement = document.getElementById("wrong")
            //Start Loading Screen
            document.getElementById("emailSended").style = "display: none;"
            document.getElementById("loadingPage").style = "display:contents"

            let response = await getRequest("http://localhost:3000/verify?email=" + gEmail + "&code=" + pin)

            document.getElementById("emailSended").style = "display:contents"
            document.getElementById("loadingPage").style = "display:none"

            if (response.substring(0, 1) != "E") {
                location.href="./dashboard.html";
            }
            else wrongElement.style = "display:block";
            wrongElement.style = "color: red;"
        }
        clear()
        function Sleep(milliseconds) {
            return new Promise(resolve => setTimeout(resolve, milliseconds));
        }

        function getRequest(url) {
            return new Promise(function (resolve, reject) {
                var xhr = new XMLHttpRequest();
                xhr.open('get', url, true);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4 && xhr.status == 200)
                        resolve(xhr.responseText);
                    else reject
                }
                xhr.send();
            });
        }


        function setCookie(name, value, days) {
            var expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + (hours * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }
        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
        function eraseCookie(name) {
            document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }

        function getCookie(cookieName) {
            var cookieArray = document.cookie.split(';');
            for (var i = 0; i < cookieArray.length; i++) {
                var cookie = cookieArray[i];
                while (cookie.charAt(0) == ' ') {
                    cookie = cookie.substring(1);
                }
                cookieHalves = cookie.split('=');
                if (cookieHalves[0] == cookieName) {
                    return cookieHalves[1];
                }
            }
            return "";
        }
    </script>

</html>